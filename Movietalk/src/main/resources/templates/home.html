<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>í™ˆ</title>
    <meta charset="UTF-8">
</head>
<body>
<div th:replace="~{fragments/top-nav :: topNav}"></div>

<!-- ë©”ì¸ ê·¸ë¦¬ë“œ: íšŒì›ì •ë³´ + ë©”ì¸ì½˜í…ì¸ (ì¸ê¸°ì˜í™”/ë°°ìš°) -->
<div style="display: flex; justify-content: flex-start; align-items: flex-start; gap:48px; max-width: 1400px; margin: 36px auto 64px;">

    <!-- 1. ì™¼ìª½: íšŒì› ì •ë³´ -->
    <div style="width: 220px; min-width: 180px; flex-shrink: 0;">
        <div style="border:1px solid #ddd; border-radius:14px; padding:24px;">
            <h3>íšŒì› ì •ë³´</h3>
            <div><span th:text="${nickname}"></span></div>
            <div>ë‚˜ì˜ ë¦¬ë·° ìˆ˜: <span th:text="${reviewCnt}"></span></div>
            <div>ë‚˜ì˜ ëŒ“ê¸€ ìˆ˜: <span th:text="${commentCnt}"></span></div>
            <form th:action="@{/logout}" method="post" style="width:100%;">
                <button type="submit" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
            </form>
        </div>
    </div>


    <!-- 2. ê°€ìš´ë°: ì¸ê¸° ì˜í™” + ì¸ê¸° ë°°ìš° (ë” í¼) -->
    <div style="flex:1; display: flex; flex-direction: column; align-items: center;">


        <div style="width: 100%; max-width: 1100px; margin:0 auto; min-width: 440px; border:2px solid #bbb; border-radius:22px; padding:38px 28px 38px 28px; margin-bottom:48px; background:#fafbfc;">
            <h2 style="margin-bottom:30px; font-size:2em;">ğŸ”¥ ì¸ê¸° ì˜í™”</h2>
            <div style="display: flex; gap: 40px; justify-content: center;">


                <div th:each="movie : ${popularMovies}"
                     style="width: 190px; border:1.5px solid #eee; border-radius:15px; padding:24px 10px; text-align:center; background:#fff; cursor:pointer; box-shadow: 0 3px 12px rgba(60,60,60,0.07); transition: box-shadow 0.18s;"
                     th:onclick="|window.location.href='/movies/${movie.movieId}'|"
                     onmouseover="this.style.boxShadow='0 8px 24px rgba(60,60,60,0.16)';"
                     onmouseout="this.style.boxShadow='0 3px 12px rgba(60,60,60,0.07)';"
                >
                    <img th:src="${movie.posterUrl}" style="border-radius:10px; width:140px; height:210px;"><br>
                    <span style="display:block; margin:22px 0 16px 0; font-size:1.1em; font-weight:600;" th:text="${movie.title}"></span>
                </div>

            </div>
        </div>


        <!-- ì¸ê¸° ë°°ìš° ë°•ìŠ¤ (ì„¸ë¡œ ë” í¼) -->
        <div style="width: 100%; max-width: 1100px; margin:0 auto; min-width: 440px; border:2px solid #bbb; border-radius:22px; padding:38px 28px 38px 28px; margin-bottom:48px; background:#fafbfc;">
            <h2 style="margin-bottom:30px; font-size:2em;">ğŸŒŸ ì¸ê¸° ë°°ìš°</h2>
            <div style="display: flex; gap: 40px; justify-content: center;">

                <div style="width: 170px; border:1.5px solid #eee; border-radius:15px; padding:24px 10px; text-align:center; background:#fff; cursor:pointer; box-shadow:0 3px 12px rgba(60,60,60,0.07); transition:box-shadow 0.18s;"
                     onclick="alert('ë°°ìš° ìƒì„¸í˜ì´ì§€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤!')"
                     onmouseover="this.style.boxShadow='0 8px 24px rgba(60,60,60,0.16)';"
                     onmouseout="this.style.boxShadow='0 3px 12px rgba(60,60,60,0.07)';"
                >
                    <img src="https://via.placeholder.com/120x160?text=ë°°ìš°1" alt="ë°°ìš°1" style="border-radius:18px;"><br>
                    <span style="display:block; margin:18px 0 8px 0; font-size:1.07em; font-weight:500;">ë°°ìš°ì´ë¦„1</span>
                </div>


                <div style="width: 170px; border:1.5px solid #eee; border-radius:15px; padding:24px 10px; text-align:center; background:#fff; cursor:pointer; box-shadow:0 3px 12px rgba(60,60,60,0.07); transition:box-shadow 0.18s;"
                     onclick="alert('ë°°ìš° ìƒì„¸í˜ì´ì§€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤!')"
                     onmouseover="this.style.boxShadow='0 8px 24px rgba(60,60,60,0.16)';"
                     onmouseout="this.style.boxShadow='0 3px 12px rgba(60,60,60,0.07)';"
                >
                    <img src="https://via.placeholder.com/120x160?text=ë°°ìš°2" alt="ë°°ìš°2" style="border-radius:18px;"><br>
                    <span style="display:block; margin:18px 0 8px 0; font-size:1.07em; font-weight:500;">ë°°ìš°ì´ë¦„2</span>
                </div>
                <div style="width: 170px; border:1.5px solid #eee; border-radius:15px; padding:24px 10px; text-align:center; background:#fff; cursor:pointer; box-shadow:0 3px 12px rgba(60,60,60,0.07); transition:box-shadow 0.18s;"
                     onclick="alert('ë°°ìš° ìƒì„¸í˜ì´ì§€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤!')"
                     onmouseover="this.style.boxShadow='0 8px 24px rgba(60,60,60,0.16)';"
                     onmouseout="this.style.boxShadow='0 3px 12px rgba(60,60,60,0.07)';"
                >
                    <img src="https://via.placeholder.com/120x160?text=ë°°ìš°3" alt="ë°°ìš°3" style="border-radius:18px;"><br>
                    <span style="display:block; margin:18px 0 8px 0; font-size:1.07em; font-weight:500;">ë°°ìš°ì´ë¦„3</span>
                </div>
                <div style="width: 170px; border:1.5px solid #eee; border-radius:15px; padding:24px 10px; text-align:center; background:#fff; cursor:pointer; box-shadow:0 3px 12px rgba(60,60,60,0.07); transition:box-shadow 0.18s;"
                     onclick="alert('ë°°ìš° ìƒì„¸í˜ì´ì§€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤!')"
                     onmouseover="this.style.boxShadow='0 8px 24px rgba(60,60,60,0.16)';"
                     onmouseout="this.style.boxShadow='0 3px 12px rgba(60,60,60,0.07)';"
                >
                    <img src="https://via.placeholder.com/120x160?text=ë°°ìš°4" alt="ë°°ìš°4" style="border-radius:18px;"><br>
                    <span style="display:block; margin:18px 0 8px 0; font-size:1.07em; font-weight:500;">ë°°ìš°ì´ë¦„4</span>
                </div>
            </div>
        </div>

        <!-- ì¸ê¸° ë¦¬ë·°/ëŒ“ê¸€ í†µí•© ë°•ìŠ¤ -->
        <div style="width:100%; max-width:720px; margin:48px auto 0 auto; border:2px solid #bbb; border-radius:18px; background:#fff; overflow:hidden;">

            <div style="display:flex;">
                <div id="tab-review" style="flex:1; text-align:center; padding:22px 0; font-weight:600; font-size:1.13em; cursor:pointer; background:#4CAF50;"
                     onclick="showTab('review')"
                     onmouseover="this.style.backgroundColor='#43b14b'"
                     onmouseout="this.style.backgroundColor=selectedTab==='review' ? '#4CAF50' : '#f8f8f8'">
                    ğŸ“ ì¸ê¸° ë¦¬ë·°
                </div>
                <div id="tab-comment" style="flex:1; text-align:center; padding:22px 0; font-weight:600; font-size:1.13em; cursor:pointer; background:#f8f8f8;"
                     onclick="showTab('comment')"
                     onmouseover="this.style.backgroundColor='#43b14b'"
                     onmouseout="this.style.backgroundColor=selectedTab==='comment' ? '#4CAF50' : '#f8f8f8'">
                    ğŸ’¬ ì¸ê¸° ëŒ“ê¸€
                </div>
            </div>



            <div id="tab-review-list" style="padding:36px 38px;">
                <div th:each="review : ${topReviews}" style="margin-bottom:14px;">
                    <div
                            style="display: flex; align-items: center; justify-content: space-between; padding:12px 24px; border-radius:13px; background:#fafbfc; border:1.5px solid #e7e7e7; font-size:1.07em; cursor:pointer; transition:background 0.17s, box-shadow 0.17s;"
                            th:onclick="|window.location.href='@{/reviews/{id}(id=${review.reviewId})}'|"
                            onmouseover="this.style.background='#f3f6fa'; this.style.boxShadow='0 3px 16px #f2f2f2';"
                            onmouseout="this.style.background='#fafbfc'; this.style.boxShadow='none';"
                    >
                        <!-- ì™¼ìª½: ì œëª©, ë‚´ìš© -->
                        <div>
                            <b th:text="${review.movieTitle}">ì˜í™” ì œëª©</b>
                            <span style="color:#bbb; margin:0 8px;">|</span>
                            <span th:text="${review.content}" style="color:#333;">ë¦¬ë·° ë‚´ìš©</span>
                        </div>
                        <!-- ì˜¤ë¥¸ìª½: ì¢‹ì•„ìš” ìˆ˜ -->
                        <div style="display: flex; align-items: center; gap:6px; min-width:65px; justify-content: flex-end;">
                            <img src="https://cdn-icons-png.flaticon.com/512/833/833472.png" alt="Like" width="18" style="margin-right:3px; opacity:0.7;">
                            <span th:text="${review.likeCount}" style="font-weight:600; color:#248253; font-size:1.07em;"></span>
                        </div>
                    </div>
                </div>
            </div>


            <div id="tab-comment-list" style="display:none; padding:36px 38px;">
                <div th:each="comment : ${topComments}" style="margin-bottom:14px;">
                    <div
                            style="display: flex; align-items: center; justify-content: space-between; padding:12px 24px; border-radius:13px; background:#fafbfc; border:1.5px solid #e7e7e7; font-size:1.07em; cursor:pointer; transition:background 0.17s, box-shadow 0.17s;"
                            th:onclick="|window.location.href='@{/reviews/{id}(id=${comment.reviewId})}'|"
                            onmouseover="this.style.background='#f3f6fa'; this.style.boxShadow='0 3px 16px #f2f2f2';"
                            onmouseout="this.style.background='#fafbfc'; this.style.boxShadow='none';"
                    >
                        <!-- ì™¼ìª½: ë‹‰ë„¤ì„ + ëŒ“ê¸€ ë‚´ìš© -->
                        <div>
                            <b th:text="${comment.nickname}" style="margin-right:7px;">ë‹‰ë„¤ì„</b>
                            <span style="color:#bbb; margin:0 7px;">|</span>
                            <span th:text="${comment.content}" style="color:#333; max-width:340px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: middle;">ëŒ“ê¸€ ë‚´ìš©</span>
                        </div>
                        <!-- ì˜¤ë¥¸ìª½: ì¢‹ì•„ìš” ìˆ˜ -->
                        <div style="display: flex; align-items: center; gap:6px; min-width:65px; justify-content: flex-end;">
                            <img src="https://cdn-icons-png.flaticon.com/512/833/833472.png" alt="Like" width="18" style="margin-right:3px; opacity:0.7;">
                            <span th:text="${comment.likeCount}" style="font-weight:600; color:#248253; font-size:1.07em;"></span>
                        </div>
                    </div>
                </div>
            </div>


        <script>
            // íƒ­ ì „í™˜ ìŠ¤í¬ë¦½íŠ¸
            let selectedTab = 'review';
            function showTab(tab) {
                selectedTab = tab;
                document.getElementById('tab-review-list').style.display = tab === 'review' ? 'block' : 'none';
                document.getElementById('tab-comment-list').style.display = tab === 'comment' ? 'block' : 'none';
                document.getElementById('tab-review').style.background = tab === 'review' ? '#4CAF50' : '#f8f8f8';
                document.getElementById('tab-comment').style.background = tab === 'comment' ? '#4CAF50' : '#f8f8f8';
            }
        </script>


    </div>
</div>
</div>




</body>
</html>
