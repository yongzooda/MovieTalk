<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <title>í™ˆ</title>
    <meta charset="UTF-8">

    <style>
        .profile-card {
            width: 230px;
            min-width: 180px;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 18px rgba(50, 70, 90, 0.08);
            border: none;
            padding: 28px 24px 20px 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
        }
        .profile-card h3 {
            margin: 0 0 10px 0;
            font-size: 1.3em;
            color: #25564b;
            font-weight: 700;
            letter-spacing: -1px;
        }
        .profile-nickname {
            font-size: 1.15em;
            font-weight: 600;
            color: #28826d;
            margin-bottom: 6px;
        }
        .profile-counts {
            display: flex;
            gap: 18px;
            margin-bottom: 8px;
            font-size: 0.97em;
            color: #444;
        }
        .profile-counts b {
            font-size: 1.08em;
            color: #32b09e;
        }
        .logout-btn {
            width: 100%;
            background: linear-gradient(90deg, #38a169 60%, #2f855a 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            padding: 9px 0 8px 0;
            font-weight: 600;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: background 0.18s, box-shadow 0.18s;
            box-shadow: 0 2px 8px rgba(56, 161, 105, 0.05);
        }
        .logout-btn:hover {
            background: linear-gradient(90deg, #2f855a 50%, #38a169 100%);
            box-shadow: 0 4px 16px rgba(56, 161, 105, 0.12);
        }
    </style>

</head>
<body>
<div th:replace="~{fragments/top-nav :: topNav}"></div>

<!-- ë©”ì¸ ê·¸ë¦¬ë“œ: íšŒì›ì •ë³´ + ë©”ì¸ì½˜í…ì¸ (ì¸ê¸°ì˜í™”/ë°°ìš°) -->
<div style="display: flex; justify-content: flex-start; align-items: flex-start; gap:48px; max-width: 1400px; margin: 36px auto 64px;">

    <!-- 1. ì™¼ìª½: íšŒì› ì •ë³´ -->
    <div class="profile-card">
        <h3>íšŒì› ì •ë³´</h3>
        <div class="profile-nickname" th:text="${nickname}">ë‹‰ë„¤ì„</div>
        <div class="profile-counts">
            <span>ë¦¬ë·° <b th:text="${reviewCnt}">0</b></span>
            <span>ëŒ“ê¸€ <b th:text="${commentCnt}">0</b></span>
        </div>
        <form th:action="@{/logout}" method="post" style="width:100%;">
            <button type="submit" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
        </form>
    </div>


    <!-- 2. ê°€ìš´ë°: ì¸ê¸° ì˜í™” + ì¸ê¸° ë°°ìš° (ë” í¼) -->
    <div style="flex:1; display: flex; flex-direction: column; align-items: center;">


        <div style="width: 100%; max-width: 1100px; margin:0 auto; min-width: 440px; border:2px solid #bbb; border-radius:22px; padding:38px 28px 38px 28px; margin-bottom:48px; background:#fafbfc;">
            <h2 style="margin-bottom:30px; font-size:2em;">ğŸ”¥ ì¸ê¸° ì˜í™”</h2>
            <div style="display: flex; gap: 40px; justify-content: center;">


                <div th:each="movie : ${popularMovies}"
                     style="width: 190px; border:1.5px solid #eee; border-radius:15px; padding:24px 10px; text-align:center; background:#fff; cursor:pointer; box-shadow: 0 3px 12px rgba(60,60,60,0.07); transition: box-shadow 0.18s;"
                     th:onclick="|window.location.href='/movies/${movie.movieId}'|"
                     onmouseover="this.style.boxShadow='0 8px 24px rgba(60,60,60,0.16)';"
                     onmouseout="this.style.boxShadow='0 3px 12px rgba(60,60,60,0.07)';"
                >
                    <img th:src="${movie.posterUrl}" style="border-radius:10px; width:140px; height:210px;" alt="url"><br>
                    <span style="display:block; margin:22px 0 16px 0; font-size:1.1em; font-weight:600;" th:text="${movie.title}"></span>
                </div>

            </div>
        </div>


        <!-- ì¸ê¸° ë°°ìš° ë°•ìŠ¤ (ì„¸ë¡œ ë” í¼) -->
        <div style="width: 100%; max-width: 1100px; margin:0 auto; min-width: 440px; border:2px solid #bbb; border-radius:22px; padding:38px 28px 38px 28px; margin-bottom:48px; background:#fafbfc;">
            <h2 style="margin-bottom:30px; font-size:2em;">ğŸ”¥ ì¸ê¸° ë°°ìš°</h2>
            <div style="display: flex; gap: 40px; justify-content: center;">


                <div th:each="actor : ${topActors}"
                     style="width: 190px; border:1.5px solid #eee; border-radius:15px; padding:24px 10px; text-align:center; background:#fff; cursor:pointer; box-shadow: 0 3px 12px rgba(60,60,60,0.07); transition: box-shadow 0.18s;"
                     th:onclick="|window.location.href='/actors/${actor.actorId}'|"
                     onmouseover="this.style.boxShadow='0 8px 24px rgba(60,60,60,0.16)';"
                     onmouseout="this.style.boxShadow='0 3px 12px rgba(60,60,60,0.07)';"
                >
                    <img th:src="${actor.profilePath}" style="border-radius:10px; width:140px; height:210px;" alt="url"><br>
                    <span style="display:block; margin:22px 0 16px 0; font-size:1.1em; font-weight:600;" th:text="${actor.name}"></span>
                </div>

            </div>
        </div>

        <!-- ì¸ê¸° ë¦¬ë·°/ëŒ“ê¸€ í†µí•© ë°•ìŠ¤ -->
        <div style="width:100%; max-width:720px; margin:48px auto 0 auto; border:2px solid #bbb; border-radius:18px; background:#fff; overflow:hidden;">

            <div style="display:flex;">
                <div id="tab-review" style="flex:1; text-align:center; padding:22px 0; font-weight:600; font-size:1.13em; cursor:pointer; background:#4CAF50;"
                     onclick="showTab('review')"
                     onmouseover="this.style.backgroundColor='#43b14b'"
                     onmouseout="this.style.backgroundColor=selectedTab==='review' ? '#4CAF50' : '#f8f8f8'">
                    ğŸ“ ì¸ê¸° ë¦¬ë·°
                </div>
                <div id="tab-comment" style="flex:1; text-align:center; padding:22px 0; font-weight:600; font-size:1.13em; cursor:pointer; background:#f8f8f8;"
                     onclick="showTab('comment')"
                     onmouseover="this.style.backgroundColor='#43b14b'"
                     onmouseout="this.style.backgroundColor=selectedTab==='comment' ? '#4CAF50' : '#f8f8f8'">
                    ğŸ’¬ ì¸ê¸° ëŒ“ê¸€
                </div>
            </div>



            <div id="tab-review-list" style="padding:36px 38px;">
                <div th:each="review : ${topReviews}" style="margin-bottom:14px;">
                    <div
                            style="display: flex; align-items: center; justify-content: space-between; padding:12px 24px; border-radius:13px; background:#fafbfc; border:1.5px solid #e7e7e7; font-size:1.07em; cursor:pointer; transition:background 0.17s, box-shadow 0.17s;"
                            th:onclick="|window.location.href='@{/reviews/{id}(id=${review.reviewId})}'|"
                            onmouseover="this.style.background='#f3f6fa'; this.style.boxShadow='0 3px 16px #f2f2f2';"
                            onmouseout="this.style.background='#fafbfc'; this.style.boxShadow='none';"
                    >
                        <!-- ì™¼ìª½: ì œëª©, ë‚´ìš© -->
                        <div>
                            <b th:text="${review.movieTitle}">ì˜í™” ì œëª©</b>
                            <span style="color:#bbb; margin:0 8px;">|</span>
                            <span th:text="${review.content}" style="color:#333;">ë¦¬ë·° ë‚´ìš©</span>
                        </div>
                        <!-- ì˜¤ë¥¸ìª½: ì¢‹ì•„ìš” ìˆ˜ -->
                        <div style="display: flex; align-items: center; gap:6px; min-width:65px; justify-content: flex-end;">
                            <img src="https://cdn-icons-png.flaticon.com/512/833/833472.png" alt="Like" width="18" style="margin-right:3px; opacity:0.7;">
                            <span th:text="${review.likeCount}" style="font-weight:600; color:#248253; font-size:1.07em;"></span>
                        </div>
                    </div>
                </div>
            </div>


            <div id="tab-comment-list" style="display:none; padding:36px 38px;">
                <div th:each="comment : ${topComments}" style="margin-bottom:14px;">
                    <div
                            style="display: flex; align-items: center; justify-content: space-between; padding:12px 24px; border-radius:13px; background:#fafbfc; border:1.5px solid #e7e7e7; font-size:1.07em; cursor:pointer; transition:background 0.17s, box-shadow 0.17s;"
                            th:onclick="|window.location.href='@{/reviews/{id}(id=${comment.reviewId})}'|"
                            onmouseover="this.style.background='#f3f6fa'; this.style.boxShadow='0 3px 16px #f2f2f2';"
                            onmouseout="this.style.background='#fafbfc'; this.style.boxShadow='none';"
                    >
                        <!-- ì™¼ìª½: ë‹‰ë„¤ì„ + ëŒ“ê¸€ ë‚´ìš© -->
                        <div>
                            <b th:text="${comment.nickname}" style="margin-right:7px;">ë‹‰ë„¤ì„</b>
                            <span style="color:#bbb; margin:0 7px;">|</span>
                            <span th:text="${comment.content}" style="color:#333; max-width:340px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: middle;">ëŒ“ê¸€ ë‚´ìš©</span>
                        </div>
                        <!-- ì˜¤ë¥¸ìª½: ì¢‹ì•„ìš” ìˆ˜ -->
                        <div style="display: flex; align-items: center; gap:6px; min-width:65px; justify-content: flex-end;">
                            <img src="https://cdn-icons-png.flaticon.com/512/833/833472.png" alt="Like" width="18" style="margin-right:3px; opacity:0.7;">
                            <span th:text="${comment.likeCount}" style="font-weight:600; color:#248253; font-size:1.07em;"></span>
                        </div>
                    </div>
                </div>
            </div>


        <script>
            // íƒ­ ì „í™˜ ìŠ¤í¬ë¦½íŠ¸
            let selectedTab = 'review';
            function showTab(tab) {
                selectedTab = tab;
                document.getElementById('tab-review-list').style.display = tab === 'review' ? 'block' : 'none';
                document.getElementById('tab-comment-list').style.display = tab === 'comment' ? 'block' : 'none';
                document.getElementById('tab-review').style.background = tab === 'review' ? '#4CAF50' : '#f8f8f8';
                document.getElementById('tab-comment').style.background = tab === 'comment' ? '#4CAF50' : '#f8f8f8';
            }
        </script>


    </div>
</div>
</div>




</body>
</html>
