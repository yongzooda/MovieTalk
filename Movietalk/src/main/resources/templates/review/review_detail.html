<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title>리뷰 상세</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #f8f9fa;
      padding: 2rem;
      margin: 0;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 2rem;
    }
    .poster {
      width: 160px;
      float: left;
      margin-right: 2rem;
      border-radius: 8px;
    }
    h1 {
      margin-top: 0;
    }
    .meta {
      color: #555;
      font-size: 0.95rem;
    }
    .content {
      clear: both;
      margin-top: 1.5rem;
      line-height: 1.6;
    }
    .reaction-buttons {
      margin-top: 2rem;
    }
    .reaction-buttons button {
      padding: 0.5rem 1.2rem;
      font-size: 0.9rem;
      margin-right: 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .like { background-color: #28a745; color: white; }
    .dislike { background-color: #dc3545; color: white; }

    .comments {
      margin-top: 3rem;
    }
    .comment {
      border-top: 1px solid #ddd;
      padding: 1rem 0;
    }
    .comment:first-child {
      border-top: none;
    }
    .comment-meta {
      font-weight: bold;
      color: #444;
    }
    .comment-content {
      margin-top: 0.3rem;
    }
    .comment-form textarea {
      width: 100%;
      height: 80px;
      margin-top: 1rem;
      padding: 0.6rem;
      font-size: 1rem;
    }
    .comment-form button {
      margin-top: 0.5rem;
      float: right;
      padding: 0.5rem 1rem;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .report-form {
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px dashed #ccc;
    }
    .report-form textarea {
      width: 100%;
      height: 60px;
      margin-top: 0.5rem;
    }
    .report-form button {
      margin-top: 0.5rem;
      background-color: #ffc107;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <img class="poster" th:src="${review.moviePosterUrl}" alt="포스터">
    <h1 th:text="${review.movieTitle}">영화 제목</h1>
    <div class="meta">
      작성자: <span th:text="${review.author}">닉네임</span> | 작성일: <span th:text="${#temporals.format(review.createdAt, 'yyyy-MM-dd HH:mm')}">2025-06-27</span>
    </div>
    <div class="content" th:text="${review.content}">
      리뷰 본문 내용입니다.
    </div>

    <div class="reaction-buttons">
      <button class="like" th:onclick="'location.href='/reviews/like/' + ${review.id} + '''">좋아요 (<span th:text="${review.likeCount}">0</span>)</button>
      <button class="dislike" th:onclick="'location.href='/reviews/dislike/' + ${review.id} + '''">싫어요 (<span th:text="${review.dislikeCount}">0</span>)</button>
    </div>

    <div class="comments">
      <h3>💬 댓글</h3>
      <div th:each="comment : ${review.comments}" class="comment">
        <div class="comment-meta" th:text="${comment.author}">작성자</div>
        <div class="comment-content" th:text="${comment.content}">댓글 내용</div>
      </div>

      <form class="comment-form" th:action="@{'/comments/new'}" method="post">
        <input type="hidden" th:name="reviewId" th:value="${review.id}" />
        <textarea name="content" placeholder="댓글을 입력하세요..."></textarea>
        <button type="submit">댓글 작성</button>
      </form>
    </div>

    <div class="report-form">
      <h3>🚨 리뷰 신고</h3>
      <form th:action="@{'/reviews/report'}" method="post">
        <input type="hidden" th:name="reviewId" th:value="${review.id}" />
        <textarea name="reason" placeholder="신고 사유를 입력하세요."></textarea>
        <button type="submit">신고하기</button>
      </form>
    </div>
  </div>
</body>
</html>
