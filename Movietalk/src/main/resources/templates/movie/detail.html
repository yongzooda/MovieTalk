<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>영화 상세</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container my-5">

<!-- ✅ 성인 콘텐츠 제한 메시지 -->
<div th:if="${adultRestricted}" class="text-center mt-5">
    <h3 class="text-danger">성인 콘텐츠로 인해 상세 정보를 표시할 수 없습니다.</h3>
    <a th:href="@{/movies}" class="btn btn-secondary mt-4">목록으로 돌아가기</a>
</div>

<!-- ✅ 일반 상세 정보 출력 -->
<div th:unless="${adultRestricted}">
    <h2 th:text="${movie != null} ? ${movie.title} : ${detail.title}">제목</h2>

    <div class="mb-5">
        <img src="#" th:src="${movie != null} ? ${movie.posterUrl} : 'https://image.tmdb.org/t/p/w500' + ${detail.posterPath}"
             alt="포스터" style="max-width: 300px;">

        <p>
            <strong>개봉일:</strong>
            <span th:text="${movie != null} ? ${movie.releaseDate} : ${detail.releaseDate}">2024-05-01</span>
        </p>

        <p><strong>장르:</strong>
            <span th:each="genre : ${detail.genres}"
                  th:text="${genre.name}"
                  th:append=", "
                  th:remove="tag"></span>
        </p>

        <p><strong>국가:</strong>
            <span th:each="country : ${detail.productionCountries}"
                  th:text="${country.name}"
                  th:append=", "
                  th:remove="tag"></span>
        </p>

        <p><strong>러닝타임:</strong> <span th:text="${detail.runtime} + '분'">120분</span></p>
    </div>

    <div class="d-flex justify-content-center mt-5 gap-3">
        <a th:if="${movie != null}" th:href="@{/reviews/new(movieId=${movie.movieId})}" class="btn btn-primary">리뷰 작성하기</a>
        <a th:href="@{/movies}" class="btn btn-secondary">목록으로 돌아가기</a>
    </div>
</div>

</body>
</html>
